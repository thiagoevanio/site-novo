<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#b91c1c">
    <title>Calcule Sua Sa√∫de - Portal de Not√≠cias e Bem-estar</title>
    
    <!-- Meta Tags SEO & Social -->
    <meta name="description" content="Portal completo: Sa√∫de, Finan√ßas, Not√≠cias Globais, NASA, Clima e Ferramentas.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 900: '#0c4a6e',
                        },
                        portal: {
                            red: '#dc2626',    
                            dark: '#1e293b',   
                            gray: '#64748b',   
                            bg: '#f8fafc'      
                        },
                        accent: {
                            500: '#10b981', 
                            600: '#059669',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'marquee': 'marquee 40s linear infinite',
                        'breathe': 'breathe 8s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        marquee: {
                            '0%': { transform: 'translateX(100%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        },
                        breathe: {
                            '0%, 100%': { transform: 'scale(1)', opacity: '0.8' },
                            '50%': { transform: 'scale(1.1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,400&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        h1, h2, h3, h4, .manchete { font-family: 'Merriweather', serif; }
        
        .glass-header {
            background: rgba(255, 255, 255, 0.98);
            border-bottom: 1px solid #e2e8f0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }
        .dark .glass-header {
            background: rgba(15, 23, 42, 0.98);
            border-bottom: 1px solid #334155;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .breathing-circle {
            width: 80px; height: 80px; border-radius: 50%;
            background: radial-gradient(circle, #6366f1 0%, rgba(165,180,252,0.5) 100%);
            box-shadow: 0 0 20px rgba(99,102,241,0.4);
        }
        .breathing-active { animation: breathe 8s infinite ease-in-out; }
        
        .portal-link:hover { text-decoration: underline; text-decoration-color: #0284c7; text-decoration-thickness: 2px; }
    </style>
</head>
<body class="text-portal-dark dark:bg-slate-950 dark:text-slate-200 transition-colors duration-300">

    <!-- 1. BARRA DE TOPO -->
    <div class="bg-portal-dark text-white text-[11px] font-medium py-1.5 relative z-[60]">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="hidden md:flex items-center gap-4 text-slate-400">
                <span id="current-date">--/--/----</span>
                <span class="w-px h-3 bg-slate-700"></span>
                <span>S√£o Paulo, Brasil</span>
            </div>
            <div class="flex-1 md:flex-none overflow-hidden max-w-2xl">
                <div class="whitespace-nowrap animate-marquee flex gap-6 items-center" id="finance-ticker">
                    <span class="text-green-400 font-bold uppercase flex items-center gap-1"><i data-lucide="trending-up" class="w-3 h-3"></i> Mercado:</span>
                    <span id="ticker-loading">Carregando cota√ß√µes...</span>
                </div>
            </div>
            <div class="hidden md:flex gap-3 text-slate-400">
                <a href="#" class="hover:text-white transition-colors">Assine</a>
                <a href="#" class="hover:text-white transition-colors">Newsletter</a>
            </div>
        </div>
    </div>

    <!-- 2. HEADER PRINCIPAL -->
    <header class="sticky top-0 z-50 glass-header transition-all duration-300">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center h-auto md:h-20 py-3 md:py-0 gap-4 md:gap-0">
                
                <!-- Logo -->
                <div class="flex items-center justify-between w-full md:w-auto">
                    <div class="flex items-center gap-4">
                        <button id="mobile-menu-btn" class="md:hidden text-slate-700 dark:text-slate-300" aria-label="Abrir menu">
                            <i data-lucide="menu" class="w-6 h-6"></i>
                        </button>
                        <a href="#" class="flex items-center gap-2 group">
                            <div class="bg-brand-600 text-white p-1.5 rounded shadow-sm group-hover:scale-105 transition-transform">
                                <i data-lucide="heart-pulse" class="w-6 h-6"></i>
                            </div>
                            <div class="leading-none">
                                <div class="text-2xl font-black tracking-tighter text-slate-900 dark:text-white">
                                    CALCULE<span class="text-brand-600">SA√öDE</span>
                                </div>
                            </div>
                        </a>
                    </div>
                    <button id="theme-toggle-mobile" class="md:hidden p-2 text-slate-600" aria-label="Tema">
                        <i data-lucide="moon" class="w-5 h-5 dark:hidden"></i><i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
                    </button>
                </div>

                <!-- Busca -->
                <div class="w-full md:w-1/3 relative hidden md:block">
                    <input type="text" placeholder="Buscar not√≠cias, receitas ou sintomas..." class="w-full bg-slate-100 dark:bg-slate-800 border-none rounded text-sm px-4 py-2 focus:ring-2 focus:ring-brand-500 transition-all">
                    <i data-lucide="search" class="absolute right-3 top-2 w-4 h-4 text-slate-400"></i>
                </div>

                <!-- Nav -->
                <nav class="hidden md:flex items-center gap-6 text-sm font-bold uppercase tracking-wide text-slate-600 dark:text-slate-300">
                    <a href="#feed-anchor" class="hover:text-brand-600 transition-colors">√öltimas</a>
                    <a href="#receitas" class="hover:text-accent-600 transition-colors">Nutri√ß√£o</a>
                    <a href="#ferramentas" class="hover:text-brand-600 transition-colors">Ferramentas</a>
                    <button id="theme-toggle" class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" aria-label="Alternar tema">
                        <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
                        <i data-lucide="sun" class="w-5 h-5 hidden dark:block text-yellow-400"></i>
                    </button>
                </nav>
            </div>
            
            <!-- Barra de Categorias -->
            <div class="hidden md:flex border-t border-slate-200 dark:border-slate-800 py-2 gap-6 text-xs font-bold justify-center">
                <button onclick="fetchNews('Mundo')" class="text-slate-600 hover:text-brand-600 uppercase">Mundo</button>
                <button onclick="fetchNews('Tecnologia')" class="text-slate-600 hover:text-tech-500 uppercase">Tecnologia</button>
                <button onclick="fetchNews('Saude')" class="text-brand-600 uppercase">Sa√∫de & Ci√™ncia</button>
                <button onclick="fetchRecipes('Vegetarian')" class="text-accent-600 uppercase">Receitas Fit</button>
                <a href="#ferramentas" class="text-orange-600 uppercase">Calculadoras</a>
            </div>
        </div>

        <!-- Menu Mobile -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-slate-900 border-t dark:border-slate-800 shadow-xl p-4 space-y-4">
            <input type="text" placeholder="Buscar..." class="w-full bg-slate-100 dark:bg-slate-800 p-2 rounded text-sm mb-4">
            <a href="#feed-anchor" class="block font-bold text-slate-700 dark:text-slate-200">√öltimas Not√≠cias</a>
            <a href="#receitas" class="block font-bold text-accent-600">Receitas & Dietas</a>
            <a href="#ferramentas" class="block font-bold text-brand-600">Calculadoras</a>
            <a href="personal.html" class="block font-bold text-orange-600">Personal Trainer</a>
        </div>
    </header>

    <!-- 3. CAPA DO PORTAL (GRID PRINCIPAL) -->
    <main class="container mx-auto px-4 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <!-- COLUNA ESQUERDA (PRINCIPAL) -->
            <div class="lg:col-span-6 space-y-6">
                <div id="main-headline-container" class="group cursor-pointer relative overflow-hidden rounded-xl shadow-sm h-[400px]">
                    <div class="bg-slate-200 dark:bg-slate-800 h-full w-full animate-pulse"></div>
                </div>
            </div>

            <!-- COLUNA MEIO (SECUND√ÅRIAS) -->
            <div class="lg:col-span-3 space-y-6">
                <div id="sub-headlines-container" class="space-y-6">
                    <div class="bg-slate-200 dark:bg-slate-800 h-48 w-full rounded-lg animate-pulse"></div>
                    <div class="bg-slate-200 dark:bg-slate-800 h-48 w-full rounded-lg animate-pulse"></div>
                </div>
            </div>

            <!-- COLUNA DIREITA (SIDEBAR SERVI√áOS) -->
            <div class="lg:col-span-3 space-y-6">
                
                <!-- WIDGET IMC -->
                <div class="bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800 p-5">
                    <div class="flex items-center justify-between mb-4 border-b border-slate-100 pb-2">
                        <h3 class="font-bold text-slate-800 dark:text-white flex items-center gap-2">
                            <i data-lucide="calculator" class="w-4 h-4 text-brand-600"></i> IMC R√°pido
                        </h3>
                        <span class="text-[10px] bg-slate-100 dark:bg-slate-800 text-slate-500 px-2 py-0.5 rounded-full" id="history-badge">Hist√≥rico</span>
                    </div>
                    <div id="last-result-box" class="hidden mb-3 text-xs text-brand-600 bg-brand-50 p-2 rounded">
                        √öltimo: <strong id="last-imc-val">--</strong>
                    </div>
                    <form id="quick-imc-form" class="space-y-3">
                        <div class="flex gap-2">
                            <input type="number" id="quick-weight" class="w-1/2 p-2 text-sm bg-slate-50 dark:bg-slate-800 border rounded" placeholder="Peso (kg)">
                            <input type="number" step="0.01" id="quick-height" class="w-1/2 p-2 text-sm bg-slate-50 dark:bg-slate-800 border rounded" placeholder="Altura (m)">
                        </div>
                        <button type="submit" class="w-full bg-brand-700 hover:bg-brand-800 text-white text-sm font-bold py-2 rounded transition-colors">Calcular</button>
                    </form>
                    <div id="quick-result" class="hidden mt-3 text-center border-t pt-2">
                        <span class="text-2xl font-black text-brand-700 block" id="imc-value">00.0</span>
                        <span class="text-xs text-slate-500" id="imc-status">Normal</span>
                    </div>
                </div>

                <!-- WIDGET CLIMA -->
                <div id="weather-widget" class="bg-gradient-to-r from-blue-600 to-brand-700 rounded-lg p-4 text-white shadow-md relative overflow-hidden">
                    <div class="relative z-10 flex justify-between items-center">
                        <div>
                            <p class="text-xs opacity-80 uppercase tracking-wider mb-1">Agora</p>
                            <div class="flex items-baseline gap-2">
                                <span class="text-3xl font-black" id="weather-temp">--¬∞</span>
                                <span class="text-xs" id="weather-city">SP</span>
                            </div>
                            <p class="text-[10px] mt-1 opacity-90" id="weather-tip">Carregando...</p>
                        </div>
                        <i data-lucide="cloud-sun" class="w-10 h-10 opacity-80"></i>
                    </div>
                </div>

                <!-- WIDGET POPULA√á√ÉO -->
                <div class="bg-slate-800 text-white rounded-lg p-4 text-center">
                    <p class="text-[10px] text-slate-400 uppercase tracking-widest mb-1">Brasil (Popula√ß√£o Est.)</p>
                    <p class="text-xl font-mono text-green-400 font-bold tracking-widest" id="ibge-pop">216.420.392</p>
                </div>
            </div>
        </div>
    </main>

    <!-- 4. TODAS AS FERRAMENTAS (Restauradas) -->
    <section id="ferramentas" class="bg-white dark:bg-slate-900 border-y border-slate-200 dark:border-slate-800 py-8">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="flex items-center justify-between mb-6">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-widest text-center md:text-left">Central de Ferramentas</p>
                <span class="text-xs text-slate-400">Acesso R√°pido</span>
            </div>
            
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-9 gap-4">
                <!-- Originais Restaurados -->
                <a href="ferramentas/imc.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center"><i data-lucide="scale" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">IMC</span>
                </a>
                <a href="ferramentas/tmb.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center"><i data-lucide="flame" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">Calorias</span>
                </a>
                <a href="ferramentas/agua.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-cyan-100 text-cyan-600 flex items-center justify-center"><i data-lucide="droplets" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">√Ågua</span>
                </a>
                <a href="ferramentas/gordura.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-yellow-100 text-yellow-600 flex items-center justify-center"><i data-lucide="percent" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">Gordura</span>
                </a>
                <a href="ferramentas/macros.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center"><i data-lucide="utensils" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">Macros</span>
                </a>
                <a href="ferramentas/glicemia.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-red-100 text-red-600 flex items-center justify-center"><i data-lucide="activity" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">Glicemia</span>
                </a>
                <a href="ferramentas/imc_infantil.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-pink-100 text-pink-600 flex items-center justify-center"><i data-lucide="baby" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">IMC Kids</span>
                </a>
                <a href="personal.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center"><i data-lucide="dumbbell" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">Treino</span>
                </a>
                <a href="todos_quizzes.html" class="flex flex-col items-center gap-2 group cursor-pointer p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all">
                    <div class="w-10 h-10 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center"><i data-lucide="brain-circuit" class="w-5 h-5"></i></div>
                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400">Quizzes</span>
                </a>
            </div>
        </div>
    </section>

    <!-- 5. FEED "INFINITO" + SIDEBAR CONTE√öDO -->
    <section id="feed-anchor" class="container mx-auto px-4 lg:px-8 py-10">
        <div class="flex flex-col lg:flex-row gap-12">
            
            <!-- Feed de Not√≠cias -->
            <div class="lg:w-2/3">
                <div class="flex items-center gap-2 mb-6 border-b-2 border-brand-600 pb-2 inline-block">
                    <span class="w-2 h-2 rounded-full bg-red-600 animate-pulse"></span>
                    <h2 class="text-xl font-bold uppercase tracking-wide text-brand-700 dark:text-brand-400">√öltimas do Feed</h2>
                </div>
                
                <div id="news-feed-container" class="flex flex-col gap-8 divide-y divide-slate-100 dark:divide-slate-800">
                    <!-- Not√≠cias entram aqui -->
                </div>
                
                <button onclick="fetchNews('Mundo')" class="mt-8 w-full py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold rounded hover:bg-slate-200 transition-colors">
                    Carregar Mais Not√≠cias
                </button>

                <!-- DESTAQUES DA REDA√á√ÉO (SEUS ARTIGOS ORIGINAIS) -->
                <div class="mt-16">
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white mb-6 border-l-4 border-brand-600 pl-3">Destaques da Nossa Biblioteca</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Artigo 1 -->
                        <div class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg overflow-hidden group">
                            <a href="artigos/metabolismo-como-acelerar.html" class="block h-32 overflow-hidden">
                                <img src="img/artigos/metabolismo.jpg" onerror="this.src='https://images.unsplash.com/photo-1571019614242-c5c5dee9f50b?w=400'" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-transform">
                            </a>
                            <div class="p-3">
                                <h4 class="font-bold text-sm mb-1 leading-tight"><a href="artigos/metabolismo-como-acelerar.html" class="hover:text-brand-600">Acelere seu Metabolismo</a></h4>
                                <span class="text-[10px] text-slate-500 uppercase">Nutri√ß√£o</span>
                            </div>
                        </div>
                        <!-- Artigo 2 -->
                        <div class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg overflow-hidden group">
                            <a href="artigos/hidratacao-importancia-saude.html" class="block h-32 overflow-hidden">
                                <img src="img/artigos/hidratacao.jpg" onerror="this.src='https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=400'" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-transform">
                            </a>
                            <div class="p-3">
                                <h4 class="font-bold text-sm mb-1 leading-tight"><a href="artigos/hidratacao-importancia-saude.html" class="hover:text-cyan-600">O Poder da √Ågua</a></h4>
                                <span class="text-[10px] text-slate-500 uppercase">Bem-estar</span>
                            </div>
                        </div>
                        <!-- Artigo 3 -->
                        <div class="bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg overflow-hidden group">
                            <a href="artigos/ia-saude-chatgpt-gemini.html" class="block h-32 overflow-hidden">
                                <img src="img/artigos/iasaude.png" onerror="this.src='https://images.unsplash.com/photo-1677442136019-21780ecad995?w=400'" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-transform">
                            </a>
                            <div class="p-3">
                                <h4 class="font-bold text-sm mb-1 leading-tight"><a href="artigos/ia-saude-chatgpt-gemini.html" class="hover:text-tech-500">IA na Sa√∫de</a></h4>
                                <span class="text-[10px] text-slate-500 uppercase">Tecnologia</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <a href="artigos.html" class="text-xs font-bold text-brand-600 hover:underline">Ver Biblioteca Completa ‚Üí</a>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <aside class="lg:w-1/3 space-y-8">
                <!-- NASA -->
                <div class="bg-black rounded-lg overflow-hidden relative group">
                    <div class="h-56 relative">
                        <img id="nasa-img" src="" loading="lazy" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity" alt="NASA">
                        <div class="absolute top-2 left-2 bg-red-600 text-white text-[10px] font-bold px-2 py-0.5 rounded">ESPA√áO</div>
                        <div class="absolute bottom-0 p-4 bg-gradient-to-t from-black to-transparent w-full">
                            <p class="text-xs text-slate-300 mb-1">Astronomy Picture of the Day</p>
                            <h4 class="text-white font-bold leading-tight" id="nasa-title">Carregando cosmos...</h4>
                        </div>
                    </div>
                </div>

                <!-- Cita√ß√£o -->
                <div class="bg-yellow-50 dark:bg-yellow-900/10 border-l-4 border-yellow-400 p-4">
                    <i data-lucide="quote" class="w-4 h-4 text-yellow-600 mb-2"></i>
                    <p class="font-serif italic text-slate-800 dark:text-slate-200 text-sm mb-2" id="daily-quote">...</p>
                    <p class="text-xs font-bold text-slate-500 text-right" id="daily-author"></p>
                </div>

                <!-- Respira√ß√£o -->
                <div class="bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-xl text-center border border-indigo-100 dark:border-indigo-900/30">
                    <h4 class="font-bold text-indigo-900 dark:text-indigo-300 mb-4">Pausa Anti-Stress</h4>
                    <div class="flex justify-center mb-4">
                        <div id="breathing-circle" class="breathing-circle flex items-center justify-center">
                            <span class="text-xs font-bold text-white" id="breath-text">Inicie</span>
                        </div>
                    </div>
                    <button onclick="toggleBreathing()" id="breath-btn" class="text-xs font-bold text-indigo-600 hover:underline">Come√ßar 4-4-4</button>
                </div>
            </aside>
        </div>
    </section>

    <!-- 6. SE√á√ÉO RECEITAS (Com Links de Busca) -->
    <section id="receitas" class="bg-slate-100 dark:bg-slate-900 py-12 border-t border-slate-200 dark:border-slate-800">
        <div class="container mx-auto px-4 lg:px-8">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-black text-slate-800 dark:text-white font-serif">Gastronomia & Nutri√ß√£o</h2>
                <div class="flex gap-2">
                    <button onclick="fetchRecipes('Vegetarian')" class="px-3 py-1 text-xs font-bold bg-white dark:bg-slate-800 rounded shadow hover:bg-accent-50 transition-colors">Vegetariano</button>
                    <button onclick="fetchRecipes('Breakfast')" class="px-3 py-1 text-xs font-bold bg-white dark:bg-slate-800 rounded shadow hover:bg-accent-50 transition-colors">Caf√© da Manh√£</button>
                </div>
            </div>
            
            <div id="recipes-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <!-- JS preenche aqui -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-portal-dark text-slate-400 text-xs py-10 border-t border-slate-800">
        <div class="container mx-auto px-4 text-center md:text-left">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h5 class="text-white font-black text-lg mb-4">CALCULE<span class="text-brand-500">SA√öDE</span></h5>
                    <p class="mb-4">Informa√ß√£o confi√°vel, ferramentas precisas e ci√™ncia para uma vida melhor.</p>
                    <div class="flex gap-4 justify-center md:justify-start">
                        <i data-lucide="facebook" class="w-5 h-5 hover:text-white cursor-pointer"></i>
                        <i data-lucide="instagram" class="w-5 h-5 hover:text-white cursor-pointer"></i>
                        <i data-lucide="twitter" class="w-5 h-5 hover:text-white cursor-pointer"></i>
                    </div>
                </div>
                <div>
                    <h6 class="text-white font-bold uppercase mb-4">Editorial</h6>
                    <ul class="space-y-2">
                        <li><a href="politica.html" class="hover:text-brand-400">Pol√≠tica de Privacidade</a></li>
                        <li><a href="termos.html" class="hover:text-brand-400">Termos de Uso</a></li>
                    </ul>
                </div>
                <div>
                    <h6 class="text-white font-bold uppercase mb-4">Ferramentas</h6>
                    <ul class="space-y-2">
                        <li><a href="ferramentas/imc.html" class="hover:text-brand-400">Calculadora IMC</a></li>
                        <li><a href="ferramentas/tmb.html" class="hover:text-brand-400">Tabela de Calorias</a></li>
                        <li><a href="todos_quizzes.html" class="hover:text-brand-400">Quizzes de Sa√∫de</a></li>
                    </ul>
                </div>
                <div>
                    <h6 class="text-white font-bold uppercase mb-4">Parceiro</h6>
                    <a href="https://play.google.com/store/apps/details?id=com.thiagoevanio.finsafe&hl=pt_BR" target="_blank" class="bg-slate-800 p-3 rounded flex items-center gap-3">
                        <div class="bg-green-600 p-2 rounded text-white"><i data-lucide="smartphone" class="w-4 h-4"></i></div>
                        <div>
                            <p class="font-bold text-white">FinSafe App</p>
                            <p class="text-[10px]">Controle Financeiro</p>
                        </div>
                    </a>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-slate-800 text-center">
                ¬© 2025 Calcule Sua Sa√∫de. Conte√∫do informativo, consulte sempre um m√©dico.
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        lucide.createIcons();

        document.getElementById('current-date').textContent = new Date().toLocaleDateString('pt-BR', { weekday: 'short', day: 'numeric', month: 'long' });

        const themeBtn = document.getElementById('theme-toggle');
        const themeBtnMobile = document.getElementById('theme-toggle-mobile');
        const htmlEl = document.documentElement;
        
        function toggleTheme() {
            htmlEl.classList.toggle('dark');
            localStorage.theme = htmlEl.classList.contains('dark') ? 'dark' : 'light';
        }
        themeBtn.addEventListener('click', toggleTheme);
        themeBtnMobile.addEventListener('click', toggleTheme);

        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            htmlEl.classList.add('dark');
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // 1. Not√≠cias
        const RSS_API_URL = "https://api.rss2json.com/v1/api.json?rss_url=https://news.google.com/rss/search?q=saude+medicina+bem-estar&hl=pt-BR&gl=BR&ceid=BR:pt-BR";
        const MOCK_NEWS = [
            { title: "Descoberta Revolucion√°ria: Novo tratamento para Diabetes tipo 2 aprovado no Brasil", link: "#", image: "https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800", date: "Hoje", desc: "Anvisa libera medicamento que promete reduzir em 40% as complica√ß√µes card√≠acas." },
            { title: "Onda de Calor: 5 dicas essenciais para n√£o desidratar", link: "#", image: "https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=800", date: "Ontem", desc: "" },
            { title: "Estudo liga sono irregular a problemas de mem√≥ria", link: "#", image: "https://images.unsplash.com/photo-1511174511562-5f7f18b874f8?w=800", date: "Ontem", desc: "" },
            { title: "Tecnologia: IA ajuda a detectar c√¢ncer de pele precocemente", link: "#", image: "https://images.unsplash.com/photo-1579154204601-01588f351e67?w=800", date: "2h atr√°s", desc: "" },
            { title: "Nutri√ß√£o: Por que voc√™ deveria comer mais fibras", link: "#", image: "https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=800", date: "3h atr√°s", desc: "" }
        ];

        async function fetchNews(query) {
            let url = RSS_API_URL;
            if(query) url = `https://api.rss2json.com/v1/api.json?rss_url=https://news.google.com/rss/search?q=${query}&hl=pt-BR&gl=BR&ceid=BR:pt-BR`;
            
            try {
                const res = await fetch(url);
                const data = await res.json();
                const items = (data.status === 'ok' && data.items.length > 0) ? data.items : MOCK_NEWS;
                renderPortalLayout(items);
            } catch {
                renderPortalLayout(MOCK_NEWS);
            }
        }

        function renderPortalLayout(articles) {
            const main = articles[0];
            const mainImg = main.enclosure?.link || main.thumbnail || main.image || `https://source.unsplash.com/800x600/?health&sig=1`;
            
            document.getElementById('main-headline-container').innerHTML = `
                <div class="absolute inset-0">
                    <img src="${mainImg}" loading="lazy" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105">
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/40 to-transparent"></div>
                </div>
                <div class="absolute bottom-0 left-0 p-6 w-full">
                    <span class="bg-red-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase mb-3 inline-block">Destaque do Dia</span>
                    <h2 class="text-2xl md:text-4xl font-black text-white leading-tight font-serif hover:underline decoration-white decoration-2 underline-offset-4">
                        <a href="${main.link}" target="_blank">${main.title}</a>
                    </h2>
                    <p class="text-slate-300 mt-2 text-sm line-clamp-2 hidden md:block">${(main.description || main.desc || '').replace(/<[^>]*>?/gm, '').slice(0, 150)}...</p>
                </div>
            `;

            const subContainer = document.getElementById('sub-headlines-container');
            subContainer.innerHTML = '';
            articles.slice(1, 3).forEach((art, i) => {
                const img = art.enclosure?.link || art.thumbnail || art.image || `https://source.unsplash.com/800x600/?medicine&sig=${i+2}`;
                subContainer.innerHTML += `
                    <div class="group cursor-pointer flex flex-col h-full bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-slate-100 dark:border-slate-800 overflow-hidden">
                        <div class="h-32 overflow-hidden relative">
                            <img src="${img}" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform">
                        </div>
                        <div class="p-4 flex-1">
                            <h3 class="font-bold text-sm md:text-base text-slate-800 dark:text-white leading-snug font-serif portal-link">
                                <a href="${art.link}" target="_blank">${art.title}</a>
                            </h3>
                            <span class="text-[10px] text-slate-400 mt-2 block uppercase font-bold">Ler mais</span>
                        </div>
                    </div>
                `;
            });

            const feedContainer = document.getElementById('news-feed-container');
            feedContainer.innerHTML = '';
            articles.slice(3, 8).forEach((art, i) => {
                const img = art.enclosure?.link || art.thumbnail || art.image || `https://source.unsplash.com/800x600/?science&sig=${i+10}`;
                const desc = (art.description || art.desc || '').replace(/<[^>]*>?/gm, '').slice(0, 140);
                
                feedContainer.innerHTML += `
                    <article class="flex gap-4 py-4 group">
                        <div class="w-1/3 md:w-48 h-28 bg-slate-200 rounded overflow-hidden shrink-0 relative">
                            <img src="${img}" loading="lazy" class="w-full h-full object-cover group-hover:scale-105 transition-transform">
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg text-slate-900 dark:text-white font-serif leading-tight mb-2 portal-link">
                                <a href="${art.link}" target="_blank">${art.title}</a>
                            </h3>
                            <p class="text-xs md:text-sm text-slate-600 dark:text-slate-400 line-clamp-2">${desc}...</p>
                            <div class="flex items-center gap-2 mt-2">
                                <span class="text-[10px] font-bold text-brand-600 uppercase">Not√≠cia</span>
                                <span class="text-[10px] text-slate-400">‚Ä¢ ${new Date(art.pubDate || Date.now()).toLocaleDateString()}</span>
                                <button onclick="this.innerHTML='‚ú® Resumindo...'; setTimeout(()=>{this.innerHTML='‚úÖ Resumo IA: Importante ler.'; this.classList.add('text-green-600')}, 1500)" class="ml-auto text-[10px] border border-slate-200 px-2 py-0.5 rounded text-slate-500 hover:bg-slate-50">ü§ñ IA Resumir</button>
                            </div>
                        </div>
                    </article>
                `;
            });
        }

        // 2. Receitas (Agora Clic√°veis!)
        async function fetchRecipes(tag) {
            const grid = document.getElementById('recipes-grid');
            grid.innerHTML = '<div class="col-span-4 text-center py-10 opacity-50">Carregando pratos...</div>';
            try {
                const res = await fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${tag}`);
                const data = await res.json();
                grid.innerHTML = '';
                data.meals.slice(0, 4).forEach(m => {
                    // Link para buscar a receita no Google
                    const searchUrl = `https://www.google.com/search?q=receita+${encodeURIComponent(m.strMeal)}`;
                    
                    grid.innerHTML += `
                        <a href="${searchUrl}" target="_blank" class="group cursor-pointer block">
                            <div class="h-40 rounded-lg overflow-hidden relative mb-2 shadow-sm">
                                <img src="${m.strMealThumb}" loading="lazy" class="w-full h-full object-cover group-hover:scale-110 transition-transform">
                                <div class="absolute top-2 right-2 bg-white/90 text-slate-800 text-[10px] font-bold px-1.5 rounded"><i data-lucide="clock" class="w-3 h-3 inline"></i> 30m</div>
                                <div class="absolute bottom-0 w-full p-2 bg-gradient-to-t from-black/60 to-transparent">
                                    <span class="text-white text-[10px]"><i data-lucide="external-link" class="w-3 h-3 inline"></i> Ver receita</span>
                                </div>
                            </div>
                            <h4 class="font-bold text-sm text-slate-800 dark:text-white leading-tight group-hover:text-accent-600 transition-colors">${m.strMeal}</h4>
                        </a>
                    `;
                });
                lucide.createIcons();
            } catch(e) {}
        }

        // 3. Financeiro
        async function fetchFinance() {
            try {
                const res = await fetch('https://economia.awesomeapi.com.br/last/USD-BRL,EUR-BRL,BTC-BRL');
                const data = await res.json();
                const el = document.getElementById('finance-ticker');
                document.getElementById('ticker-loading').style.display = 'none';
                
                const coins = [
                    {n:'D√≥lar', v:data.USDBRL}, {n:'Euro', v:data.EURBRL}, {n:'Bitcoin', v:data.BTCBRL}
                ];
                
                coins.forEach(c => {
                    const color = parseFloat(c.v.pctChange) >= 0 ? 'text-green-400' : 'text-red-400';
                    const icon = parseFloat(c.v.pctChange) >= 0 ? '‚ñ≤' : '‚ñº';
                    const span = document.createElement('span');
                    span.innerHTML = `<span class="opacity-70">${c.n}:</span> ${parseFloat(c.v.bid).toFixed(2)} <span class="${color} text-[10px] ml-1">${icon} ${c.v.pctChange}%</span>`;
                    el.appendChild(span);
                    const sep = document.createElement('span');
                    sep.className = 'opacity-30';
                    sep.innerHTML = '|';
                    el.appendChild(sep);
                });
            } catch(e){}
        }

        // 4. Clima
        async function fetchWeather() {
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => loadWeather(pos.coords.latitude, pos.coords.longitude), () => loadWeather(-23.55, -46.63));
            } else loadWeather(-23.55, -46.63);
        }
        async function loadWeather(lat, lon) {
            try {
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                const data = await res.json();
                document.getElementById('weather-temp').innerText = `${Math.round(data.current_weather.temperature)}¬∞`;
                document.getElementById('weather-tip').innerText = data.current_weather.temperature > 25 ? "Calor: Beba √°gua." : "Clima agrad√°vel.";
            } catch {}
        }

        fetch('https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY').then(r=>r.json()).then(d=>{
            if(d.url) { document.getElementById('nasa-img').src=d.url; document.getElementById('nasa-title').textContent=d.title; }
        }).catch(()=>{
            document.getElementById('nasa-img').src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800";
        });

        const quotes = [{t:"A sa√∫de √© a maior riqueza.",a:"Virg√≠lio"}, {t:"Caminhar √© o melhor rem√©dio.",a:"Hip√≥crates"}];
        document.getElementById('daily-quote').innerText = `"${quotes[0].t}"`;
        document.getElementById('daily-author').innerText = `‚Äî ${quotes[0].a}`;

        let isBreathing = false;
        let breathInterval;
        function toggleBreathing() {
            const c = document.getElementById('breathing-circle');
            const txt = document.getElementById('breath-text');
            const btn = document.getElementById('breath-btn');
            if(!isBreathing) {
                c.classList.add('breathing-active');
                txt.innerText = "Inspire...";
                btn.innerText = "Parar";
                let step = 0;
                breathInterval = setInterval(() => {
                    step = (step + 1) % 2;
                    txt.innerText = step === 0 ? "Inspire..." : "Expire...";
                }, 4000);
                isBreathing = true;
            } else {
                c.classList.remove('breathing-active');
                clearInterval(breathInterval);
                txt.innerText = "Inicie";
                btn.innerText = "Come√ßar 4-4-4";
                isBreathing = false;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('lastImc');
            if(saved) {
                document.getElementById('last-result-box').classList.remove('hidden');
                document.getElementById('last-imc-val').textContent = saved;
            }
        });
        document.getElementById('quick-imc-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const p = parseFloat(document.getElementById('quick-weight').value);
            let a = parseFloat(document.getElementById('quick-height').value);
            if(p>0 && a>0) {
                if(a>3) a=a/100;
                const imc = (p/(a*a)).toFixed(1);
                document.getElementById('imc-value').innerText = imc;
                document.getElementById('quick-result').classList.remove('hidden');
                localStorage.setItem('lastImc', imc);
            }
        });

        fetchNews();
        fetchFinance();
        fetchRecipes('Vegetarian');
        fetchWeather();
    </script>
</body>
</html>
