<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#e11d48">
    
    <!-- === SEO PRIMÁRIO === -->
    <title>Calculadora de Frequência Cardíaca: Zonas de Treino (Karvonen) | Calcule Sua Saúde</title>
    <meta name="description" content="Calcule suas Zonas de Treino e Frequência Cardíaca Máxima. Utilize a fórmula de Karvonen para otimizar a queima de gordura e o condicionamento cardiovascular.">
    <meta name="keywords" content="calculadora frequência cardíaca, zonas de treino, fc maxima, formula karvonen, queima de gordura, batimentos por minuto, cardio">
    <meta name="author" content="Calcule Sua Saúde">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://seusite.com.br/calculadoras/frequencia.html">

    <!-- === OPEN GRAPH / SOCIAL === -->
    <meta property="og:title" content="Calculadora de Zonas de Treino - Otimize seu Cardio">
    <meta property="og:description" content="Você está treinando na intensidade certa? Descubra sua FC Máxima e as zonas ideais para seu objetivo.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://seusite.com.br/calculadoras/frequencia.html">
    <meta property="og:image" content="https://seusite.com.br/assets/og-frequencia.jpg">
    <meta property="og:locale" content="pt_BR">

    <!-- === DADOS ESTRUTURADOS (SCHEMA.ORG) === -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Calculadora de Frequência Cardíaca e Zonas de Treino",
      "url": "https://seusite.com.br/calculadoras/frequencia.html",
      "description": "Ferramenta para calcular a Frequência Cardíaca Máxima (FCM) e definir zonas de intensidade de exercício baseadas na fórmula de Karvonen.",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "All",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "BRL"
      },
      "author": {
        "@type": "Organization",
        "name": "Calcule Sua Saúde"
      }
    }
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVCQQZV60N"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EVCQQZV60N');
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        portal: { red: '#c4170c', dark: '#1e1e1e', gray: '#f5f5f5' },
                        brand: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 900: '#1e3a8a' },
                        heart: { 50: '#fff1f2', 100: '#ffe4e6', 500: '#f43f5e', 600: '#e11d48', 700: '#be123c', 900: '#881337' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'beat': 'beat 1s infinite',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
                        slideUp: { '0%': { transform: 'translateY(20px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        beat: { '0%, 100%': { transform: 'scale(1)' }, '50%': { transform: 'scale(1.1)' } }
                    }
                }
            }
        }
    </script>

    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass-effect { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .dark .glass-effect { background: rgba(17, 24, 39, 0.95); }
        .typing-dot { animation: typing 1.4s infinite ease-in-out both; }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Estilos Rich Content */
        .rich-content h2 { margin-top: 2.5rem; color: #e11d48; }
        .dark .rich-content h2 { color: #fda4af; }
        .rich-content table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
        .rich-content th { background-color: #fff1f2; text-align: left; padding: 12px; border-bottom: 2px solid #fecdd3; }
        .dark .rich-content th { background-color: #881337; border-bottom: 2px solid #9f1239; color: white; }
        .rich-content td { padding: 12px; border-bottom: 1px solid #ffe4e6; }
        .dark .rich-content td { border-bottom: 1px solid #4c0519; }
        
        .zone-card { transition: all 0.3s ease; }
        .zone-card.active-zone { transform: scale(1.02); border-width: 2px; box-shadow: 0 10px 15px -3px rgba(225, 29, 72, 0.3); }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300">

    <!-- Header Fixo -->
    <header class="fixed w-full top-0 z-40 glass-effect shadow-sm transition-all duration-300 border-b dark:border-gray-800">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="../index.html" class="flex items-center gap-2 group" title="Voltar para a página inicial">
                <div class="bg-heart-600 text-white p-2 rounded-lg group-hover:rotate-3 transition-transform shadow-lg shadow-heart-500/30">
                    <i data-lucide="heart" class="w-6 h-6 fill-current"></i>
                </div>
                <h1 class="text-xl font-bold text-gray-800 dark:text-white tracking-tight">
                    Calcule Sua <span class="text-heart-600">Saúde</span>
                </h1>
            </a>

            <nav class="hidden md:flex items-center gap-8">
                <a href="../index.html" class="text-sm font-medium hover:text-heart-600 transition-colors">Início</a>
                <a href="../calculadoras.html" class="text-sm font-bold text-heart-600">Calculadoras</a>
                <a href="../artigos.html" class="text-sm font-medium hover:text-heart-600 transition-colors">Artigos</a>
                <a href="../sobre.html" class="text-sm font-medium hover:text-heart-600 transition-colors">Sobre</a>
                
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
                    <i data-lucide="sun" class="w-5 h-5 hidden dark:block text-yellow-400"></i>
                </button>
            </nav>

            <button id="mobile-menu-btn" class="md:hidden p-2 text-gray-600 dark:text-gray-300">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-800 border-t dark:border-gray-700 fixed w-full top-[60px] z-40 shadow-lg">
            <div class="flex flex-col p-4 space-y-4">
                <a href="../index.html" class="block py-2 text-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Início</a>
                <a href="../calculadoras.html" class="block py-2 text-center font-bold text-heart-600 bg-heart-50 dark:bg-gray-700 rounded">Calculadoras</a>
                <a href="../artigos.html" class="block py-2 text-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded">Artigos</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-28 pb-20">
        <div class="container mx-auto px-4">
            
            <!-- Breadcrumbs -->
            <nav class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-8">
                <a href="../index.html" class="hover:text-heart-600">Início</a>
                <i data-lucide="chevron-right" class="w-4 h-4"></i>
                <a href="../calculadoras.html" class="hover:text-heart-600">Ferramentas</a>
                <i data-lucide="chevron-right" class="w-4 h-4"></i>
                <span class="text-gray-900 dark:text-white font-medium">Frequência Cardíaca</span>
            </nav>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-start">
                
                <!-- Coluna Esquerda: Calculadora e Artigo -->
                <div class="lg:col-span-8 space-y-12">
                    
                    <!-- Intro -->
                    <div class="text-center md:text-left">
                        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-4 leading-tight">
                            Calculadora de <span class="text-transparent bg-clip-text bg-gradient-to-r from-heart-500 to-red-600">Zonas de Treino</span>
                        </h1>
                        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl leading-relaxed">
                            Quer emagrecer ou ganhar resistência? O segredo está na intensidade. Calcule sua Frequência Cardíaca Máxima e descubra a zona ideal para seu objetivo.
                        </p>
                    </div>

                    <!-- Ferramenta / Calculadora -->
                    <section class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden p-8 relative ring-1 ring-black/5" id="ferramenta-calculo">
                        <div class="absolute top-0 right-0 p-4 opacity-5">
                            <i data-lucide="activity" class="w-48 h-48 text-heart-600"></i>
                        </div>

                        <div class="relative z-10">
                            <div class="flex items-center gap-3 mb-6 border-b border-gray-100 dark:border-gray-700 pb-4">
                                <div class="bg-heart-100 dark:bg-heart-900/30 p-3 rounded-xl text-heart-600 dark:text-heart-400 animate-pulse">
                                    <i data-lucide="heart-pulse" class="w-6 h-6"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-gray-900 dark:text-white m-0">Seus Dados</h2>
                            </div>

                            <form id="frequencia-form" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Idade -->
                                    <div>
                                        <label for="idade" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Idade (anos)</label>
                                        <input type="number" id="idade" min="10" max="100" placeholder="Ex: 30" required
                                            class="block w-full pl-4 py-3.5 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-heart-500 focus:border-heart-500 outline-none transition-all">
                                    </div>

                                    <!-- FC Repouso -->
                                    <div>
                                        <label for="repouso" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">FC Repouso (Opcional)</label>
                                        <input type="number" id="repouso" min="30" max="120" placeholder="Ex: 60"
                                            class="block w-full pl-4 py-3.5 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-heart-500 focus:border-heart-500 outline-none transition-all">
                                        <span class="text-xs text-gray-500 mt-1 block">*Melhora a precisão (Fórmula de Karvonen)</span>
                                    </div>

                                    <!-- Objetivo -->
                                    <div class="md:col-span-2">
                                        <label for="objetivo" class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Objetivo Principal</label>
                                        <div class="relative">
                                            <select id="objetivo" required class="block w-full pl-4 pr-10 py-3.5 border border-gray-200 dark:border-gray-600 rounded-xl bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-heart-500 appearance-none cursor-pointer">
                                                <option value="">Selecione um objetivo...</option>
                                                <option value="z1">Recuperação / Aquecimento (50-60%)</option>
                                                <option value="z2">Queima de Gordura / Perda de Peso (60-70%)</option>
                                                <option value="z3">Resistência Aeróbica / Cardio (70-80%)</option>
                                                <option value="z4">Performance / Anaeróbico (80-90%)</option>
                                                <option value="z5">Esforço Máximo / VO2 Max (90-100%)</option>
                                            </select>
                                            <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                                                <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" class="w-full bg-gradient-to-r from-heart-600 to-red-600 hover:from-heart-700 hover:to-red-700 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-heart-500/30 transition-all hover:-translate-y-1 flex items-center justify-center gap-2 text-lg">
                                    <i data-lucide="calculator" class="w-5 h-5"></i> Calcular Zonas
                                </button>
                            </form>

                            <!-- Resultado -->
                            <div id="resultado-container" class="hidden mt-8 animate-fade-in">
                                <div class="bg-gray-50 dark:bg-gray-900/50 p-6 rounded-2xl border border-gray-200 dark:border-gray-700">
                                    
                                    <div class="text-center mb-8">
                                        <span class="text-sm font-medium text-gray-500 uppercase tracking-wide">Frequência Cardíaca Máxima Estimada</span>
                                        <div class="flex items-center justify-center gap-2 mt-2">
                                            <i data-lucide="heart" class="w-8 h-8 text-heart-600 fill-current animate-beat"></i>
                                            <span id="res-fcmax" class="text-5xl font-black text-gray-900 dark:text-white">--</span>
                                            <span class="text-xl text-gray-500">bpm</span>
                                        </div>
                                    </div>

                                    <!-- Lista de Zonas -->
                                    <div class="space-y-3" id="zones-list">
                                        <!-- Zonas geradas via JS -->
                                    </div>

                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- ARTIGO EDUCATIVO RICO (SEO CONTENT) -->
                    <article class="prose prose-lg dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 rich-content">
                        
                        <p class="lead text-xl border-l-4 border-heart-500 pl-4 italic bg-gray-50 dark:bg-gray-800/50 p-4 rounded-r-lg">
                            Você sabia que correr o mais rápido que consegue nem sempre é a melhor forma de perder gordura? Para emagrecer, seu coração precisa bater em um ritmo específico. Entenda as zonas de treino.
                        </p>

                        <h2>Por que usar Zonas de Treino?</h2>
                        <p>
                            O corpo utiliza diferentes fontes de energia dependendo da intensidade do esforço. Em intensidades baixas (caminhada), usamos mais gordura. Em intensidades altas (sprint), usamos mais glicogênio (açúcar) muscular.
                        </p>
                        <p>
                            Treinar "no escuro", sem monitorar os batimentos, pode fazer você desperdiçar esforço. Se seu objetivo é emagrecer e você corre rápido demais, pode estar saindo da zona de queima de gordura e entrando na zona de performance, o que causa fadiga precoce.
                        </p>

                        <h2>Entendendo as 5 Zonas</h2>
                        
                        <div class="not-prose grid gap-4 my-6">
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border-l-4 border-gray-400">
                                <h4 class="font-bold text-gray-700 dark:text-gray-200 m-0">Zona 1: Recuperação (50-60%)</h4>
                                <p class="text-sm mt-1 mb-0">Atividade muito leve. Ideal para aquecimento ou dias de descanso ativo. Melhora a circulação sem desgaste.</p>
                            </div>
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-l-4 border-blue-400">
                                <h4 class="font-bold text-blue-800 dark:text-blue-200 m-0">Zona 2: Queima de Gordura (60-70%)</h4>
                                <p class="text-sm mt-1 mb-0"><strong>O "Ponto Doce" do emagrecimento.</strong> O corpo fica eficiente em usar gordura como combustível. Você deve conseguir conversar enquanto treina.</p>
                            </div>
                            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-l-4 border-green-400">
                                <h4 class="font-bold text-green-800 dark:text-green-200 m-0">Zona 3: Aeróbica (70-80%)</h4>
                                <p class="text-sm mt-1 mb-0">Melhora a capacidade cardiovascular (coração e pulmões). Aqui você começa a suar mais e a respiração fica pesada.</p>
                            </div>
                            <div class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border-l-4 border-orange-400">
                                <h4 class="font-bold text-orange-800 dark:text-orange-200 m-0">Zona 4: Anaeróbica (80-90%)</h4>
                                <p class="text-sm mt-1 mb-0">Alta intensidade. O corpo começa a produzir ácido lático. Insustentável por longos períodos. Ótimo para aumentar velocidade.</p>
                            </div>
                            <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border-l-4 border-red-500">
                                <h4 class="font-bold text-red-800 dark:text-red-200 m-0">Zona 5: Esforço Máximo (90-100%)</h4>
                                <p class="text-sm mt-1 mb-0">Sprint total. Usado apenas por atletas em intervalos muito curtos (HIIT) para aumentar o teto de performance.</p>
                            </div>
                        </div>

                        <h2>Karvonen vs. Fórmula Padrão</h2>
                        <p>
                            A fórmula simples (220 - idade) é boa, mas generalista. Nossa calculadora utiliza, quando possível, a <strong>Fórmula de Karvonen</strong>:
                        </p>
                        <blockquote class="bg-white dark:bg-gray-800 border-l-4 border-heart-500 p-4 not-italic">
                            <code>FC Alvo = ((FC Máx - FC Repouso) × %Intensidade) + FC Repouso</code>
                        </blockquote>
                        <p>
                            Isso considera o seu condicionamento atual (através da FC de Repouso), tornando o cálculo das zonas muito mais personalizado e seguro para você.
                        </p>

                        <hr class="my-8 border-gray-200 dark:border-gray-700">
                        
                        <p class="text-sm text-gray-500 italic text-center">
                            <strong>Importante:</strong> Consulte um cardiologista antes de iniciar treinos de alta intensidade, especialmente se você tem histórico de problemas cardíacos na família.
                        </p>
                    </article>
                </div>

                <!-- Coluna Direita: Sidebar -->
                <aside class="lg:col-span-4 space-y-8 sticky top-28">
                    
                    <!-- Link para outras ferramentas -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
                        <h3 class="font-bold text-lg mb-4 text-gray-900 dark:text-white border-l-4 border-heart-500 pl-3">Ferramentas Relacionadas</h3>
                        <ul class="space-y-3">
                            <li>
                                <a href="calorias.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group">
                                    <div class="bg-orange-100 text-orange-600 p-2 rounded group-hover:bg-orange-600 group-hover:text-white transition-colors"><i data-lucide="flame" class="w-4 h-4"></i></div>
                                    <span class="font-medium text-sm text-gray-700 dark:text-gray-300">Gasto Calórico</span>
                                </a>
                            </li>
                            <li>
                                <a href="imc.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group">
                                    <div class="bg-green-100 text-green-600 p-2 rounded group-hover:bg-green-600 group-hover:text-white transition-colors"><i data-lucide="activity" class="w-4 h-4"></i></div>
                                    <span class="font-medium text-sm text-gray-700 dark:text-gray-300">Calculadora IMC</span>
                                </a>
                            </li>
                            <li>
                                <a href="agua.html" class="flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group">
                                    <div class="bg-blue-100 text-blue-600 p-2 rounded group-hover:bg-blue-600 group-hover:text-white transition-colors"><i data-lucide="droplets" class="w-4 h-4"></i></div>
                                    <span class="font-medium text-sm text-gray-700 dark:text-gray-300">Água Diária</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <!-- Banner Personal -->
                    <div class="relative rounded-xl overflow-hidden bg-gray-900 text-white p-6 text-center group shadow-xl">
                        <img src="../personal.jpg" class="absolute inset-0 w-full h-full object-cover opacity-40 group-hover:opacity-30 group-hover:scale-110 transition-all duration-700" onerror="this.src='https://images.unsplash.com/photo-1599058945522-28d584b6f0ff?auto=format&fit=crop&w=500&q=60'" alt="Treino Personalizado">
                        <div class="relative z-10">
                            <span class="text-heart-400 font-bold text-xs uppercase tracking-widest bg-black/50 px-2 py-1 rounded">Cardio & Saúde</span>
                            <h3 class="text-xl font-bold mb-4 mt-3 leading-tight">Melhore seu fôlego hoje</h3>
                            <a href="../personal.html" class="inline-block bg-heart-600 hover:bg-heart-700 text-white px-6 py-3 rounded-full font-bold text-sm transition-all shadow-lg hover:shadow-heart-500/50 transform hover:-translate-y-1">Programa de Corrida</a>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-12 border-t border-gray-800">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div class="col-span-1 md:col-span-1">
                    <h3 class="text-white text-lg font-bold mb-4 flex items-center gap-2">
                        <i data-lucide="heart-pulse" class="w-5 h-5 text-heart-500"></i> Calcule Sua Saúde
                    </h3>
                    <p class="text-sm text-gray-400">Ferramentas gratuitas para cuidar da sua saúde com base em evidências científicas e tecnologia avançada.</p>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Navegação</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="../index.html" class="hover:text-heart-400 transition-colors">Início</a></li>
                        <li><a href="../sobre.html" class="hover:text-heart-400 transition-colors">Sobre Nós</a></li>
                        <li><a href="../contato.html" class="hover:text-heart-400 transition-colors">Contato</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-white font-semibold mb-4">Legal</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="../politica.html" class="hover:text-heart-400 transition-colors">Política de Privacidade</a></li>
                        <li><a href="../termos.html" class="hover:text-heart-400 transition-colors">Termos de Uso</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-white font-semibold mb-4">Redes Sociais</h4>
                    <div class="flex gap-4">
                        <a href="#" class="hover:text-white transition-colors"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                        <a href="#" class="hover:text-white transition-colors"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 pt-8 text-center text-sm text-gray-500">
                <p>&copy; 2024 Calcule Sua Saúde. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- WIDGET DO DICABOT -->
    <div id="dicabot-widget" class="fixed bottom-6 right-6 z-50 flex flex-col items-end font-sans">
        <div id="dicabot-window" class="hidden bg-white dark:bg-gray-800 w-[350px] max-w-[90vw] h-[500px] max-h-[80vh] rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 flex flex-col mb-4 overflow-hidden animate-slide-up ring-1 ring-black/5">
            <div class="bg-gradient-to-r from-green-600 to-emerald-600 p-4 flex justify-between items-center text-white shadow-md">
                <div class="flex items-center gap-3">
                    <div class="bg-white/20 p-1.5 rounded-lg backdrop-blur-sm"><i data-lucide="leaf" class="w-5 h-5 text-white"></i></div>
                    <div><h3 class="font-bold text-sm">DicaBot</h3><p class="text-[10px] text-green-100 opacity-90">Receitas • Saúde • Casa</p></div>
                </div>
                <button onclick="toggleDicaBot()" class="p-1 hover:bg-white/10 rounded-full transition-colors"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <div id="dicabot-messages" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900/50 scroll-smooth">
                <div class="flex justify-start w-full">
                    <div class="flex max-w-[85%] gap-2">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center border border-green-200 dark:border-green-700"><i data-lucide="sparkles" class="w-4 h-4 text-green-600 dark:text-green-400"></i></div>
                        <div class="bg-white dark:bg-gray-800 p-3 rounded-2xl rounded-tl-none border border-gray-200 dark:border-gray-700 text-sm shadow-sm"><p>Olá! Quer saber como medir sua pulsação ou qual a melhor zona para seu objetivo? ❤️</p></div>
                    </div>
                </div>
            </div>
            <div class="p-3 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
                <div class="relative flex items-center">
                    <input type="text" id="dicabot-input" placeholder="Digite sua dúvida..." class="w-full pl-4 pr-10 py-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-green-500/50 transition-all text-gray-800 dark:text-white" onkeypress="handleChatKeyPress(event)">
                    <button onclick="sendMessage()" class="absolute right-2 p-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors shadow-sm"><i data-lucide="send" class="w-4 h-4"></i></button>
                </div>
            </div>
        </div>
        <button id="dicabot-fab" onclick="toggleDicaBot()" class="w-14 h-14 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-lg hover:shadow-green-500/30 transition-all transform hover:scale-105 flex items-center justify-center relative group z-50">
            <i data-lucide="leaf" class="w-7 h-7"></i>
            <span class="absolute right-16 bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none shadow-md">Dicas</span>
        </button>
    </div>

    <!-- Scripts Logic -->
    <script>
        lucide.createIcons();

        // 1. Dark Mode
        const themeToggleBtn = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            htmlElement.classList.add('dark');
        } else {
            htmlElement.classList.remove('dark');
        }
        themeToggleBtn.addEventListener('click', () => {
            htmlElement.classList.toggle('dark');
            localStorage.theme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
        });

        // Mobile Menu
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // 2. Lógica da Calculadora de Frequência
        document.getElementById('frequencia-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const idade = parseInt(document.getElementById('idade').value);
            const repouso = parseInt(document.getElementById('repouso').value);
            const objetivo = document.getElementById('objetivo').value;
            const container = document.getElementById('resultado-container');
            const zonesList = document.getElementById('zones-list');

            if (!idade) return;

            // Cálculo FC Máxima (Standard)
            const fcMax = 220 - idade;
            
            // Definição das Zonas (50-60, 60-70, 70-80, 80-90, 90-100)
            const zonesConfig = [
                { id: 'z1', name: 'Z1: Recuperação', min: 0.5, max: 0.6, color: 'text-gray-600', bg: 'bg-gray-100', border: 'border-gray-200' },
                { id: 'z2', name: 'Z2: Queima Gordura', min: 0.6, max: 0.7, color: 'text-blue-600', bg: 'bg-blue-50', border: 'border-blue-200' },
                { id: 'z3', name: 'Z3: Aeróbico', min: 0.7, max: 0.8, color: 'text-green-600', bg: 'bg-green-50', border: 'border-green-200' },
                { id: 'z4', name: 'Z4: Anaeróbico', min: 0.8, max: 0.9, color: 'text-orange-600', bg: 'bg-orange-50', border: 'border-orange-200' },
                { id: 'z5', name: 'Z5: Esforço Máximo', min: 0.9, max: 1.0, color: 'text-red-600', bg: 'bg-red-50', border: 'border-red-200' }
            ];

            // Limpa lista
            zonesList.innerHTML = '';
            document.getElementById('res-fcmax').textContent = fcMax;

            zonesConfig.forEach(zone => {
                let minBPM, maxBPM;

                if (repouso && !isNaN(repouso)) {
                    // Karvonen: ((Max - Repouso) * %) + Repouso
                    minBPM = Math.round(((fcMax - repouso) * zone.min) + repouso);
                    maxBPM = Math.round(((fcMax - repouso) * zone.max) + repouso);
                } else {
                    // Standard: Max * %
                    minBPM = Math.round(fcMax * zone.min);
                    maxBPM = Math.round(fcMax * zone.max);
                }

                // Verifica se é a zona alvo selecionada
                const isActive = objetivo === zone.id;
                const activeClass = isActive ? 'active-zone ring-2 ring-heart-500' : 'opacity-80 hover:opacity-100';
                
                const html = `
                    <div class="zone-card flex items-center justify-between p-4 rounded-xl border ${zone.border} ${zone.bg} ${activeClass} dark:bg-opacity-10 dark:border-opacity-30">
                        <div>
                            <span class="font-bold ${zone.color} dark:text-gray-200 block">${zone.name}</span>
                            <span class="text-xs text-gray-500 dark:text-gray-400">${Math.round(zone.min*100)}% - ${Math.round(zone.max*100)}%</span>
                        </div>
                        <div class="text-right">
                            <span class="text-xl font-bold ${zone.color} dark:text-gray-100">${minBPM} - ${maxBPM}</span>
                            <span class="text-xs text-gray-500 block">bpm</span>
                        </div>
                    </div>
                `;
                zonesList.innerHTML += html;
            });

            container.classList.remove('hidden');
            container.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });

        // 3. Chatbot Logic
        const GEMINI_API_KEY = "AIzaSyCRLcTu7Mw5z-PxmVYtMkMktwE_QOJxZoU";
        
        function toggleDicaBot() {
            const w = document.getElementById('dicabot-window');
            w.classList.toggle('hidden');
            if(!w.classList.contains('hidden')) document.getElementById('dicabot-input').focus();
        }

        function handleChatKeyPress(e) { if(e.key === 'Enter') sendMessage(); }

        async function sendMessage() {
            const input = document.getElementById('dicabot-input');
            const text = input.value.trim();
            if(!text) return;
            
            appendMessage('user', text);
            input.value = '';
            
            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${GEMINI_API_KEY}`,
                    {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ role: 'user', parts: [{ text: "Contexto: Cardio/Coração. Responda curto: " + text }] }]
                        })
                    }
                );
                const data = await response.json();
                const botText = data.candidates?.[0]?.content?.parts?.[0]?.text || "Tente novamente.";
                appendMessage('model', botText);
            } catch (e) {
                appendMessage('model', "Erro de conexão.");
            }
        }

        function appendMessage(role, text) {
            const div = document.createElement('div');
            div.className = `flex w-full ${role === 'user' ? 'justify-end' : 'justify-start'}`;
            div.innerHTML = `
                <div class="flex max-w-[85%] gap-2 ${role === 'user' ? 'flex-row-reverse' : 'flex-row'}">
                    <div class="w-8 h-8 rounded-full ${role === 'user' ? 'bg-gray-700' : 'bg-green-100 dark:bg-green-900'} flex items-center justify-center border border-green-200 dark:border-green-700">
                        <i data-lucide="${role === 'user' ? 'user' : 'sparkles'}" class="w-4 h-4 ${role === 'user' ? 'text-white' : 'text-green-600'}"></i>
                    </div>
                    <div class="${role === 'user' ? 'bg-green-600 text-white' : 'bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700'} p-3 rounded-2xl text-sm shadow-sm">
                        ${text}
                    </div>
                </div>`;
            document.getElementById('dicabot-messages').appendChild(div);
            lucide.createIcons();
            document.getElementById('dicabot-messages').scrollTop = 9999;
        }
    </script>
</body>
</html>
